#define STB_IMAGE_IMPLEMENTATION

#include <stdio.h>
#include <string.h>
#include <cmath>
#include <vector>
#include <math.h>

#include <glew.h>
#include <glfw3.h>

#include <glm.hpp>
#include <gtc\matrix_transform.hpp>
#include <gtc\type_ptr.hpp>

#include "Window.h"
#include "Mesh.h"
#include "Shader_light.h"
#include "Camera.h"
#include "Texture.h"
#include "Sphere.h"
#include "Model.h"
#include "Skybox.h"
#include "Frame.h"
#include "Animation.h"
#include "Key.h"

#include "CommonValues.h"
#include "DirectionalLight.h"
#include "PointLight.h"
#include "SpotLight.h"
#include "Material.h"

Window mainWindow;
std::vector<Mesh*> meshList;
std::vector<Shader> shaderList;

Camera camera;
Texture dirtTexture;
Texture hallwayTexture;
Texture castleTexture;
Skybox skybox;

Material Material_brillante;
Material Material_opaco;

Model machine;
Model coin;
Model marble;
Model house01;
Model house02;
Model house03;
Model tree;
Model house01Spin;
Model fliper;
Model fliperGateMetal;
Model fliperGateWood;
Model glass;
Model vampArm;
Model vamp;
Model screw;
Model lever;
Model cow;
Model cowArm;
Model cowHead;


GLfloat deltaTime = 0.0f;
GLfloat lastTime = 0.0f;
static GLfloat limitFPS = 1.0 / 60.0;


DirectionalLight mainLight;
PointLight pointLights[MAX_POINT_LIGHTS];
SpotLight spotLights[MAX_SPOT_LIGHTS];

// Vertex Shader
static const char* vShader = "shaders/shader_light.vert";
// Fragment Shader
static const char* fShader = "shaders/shader_light.frag";



// Calculo del promedio de las normales para sombreado de Phong
void calcAverageNormals(unsigned int* indices, unsigned int indiceCount, GLfloat* vertices, unsigned int verticeCount,
	unsigned int vLength, unsigned int normalOffset)
{
	for (size_t i = 0; i < indiceCount; i += 3)
	{
		unsigned int in0 = indices[i] * vLength;
		unsigned int in1 = indices[i + 1] * vLength;
		unsigned int in2 = indices[i + 2] * vLength;
		glm::vec3 v1(vertices[in1] - vertices[in0], vertices[in1 + 1] - vertices[in0 + 1], vertices[in1 + 2] - vertices[in0 + 2]);
		glm::vec3 v2(vertices[in2] - vertices[in0], vertices[in2 + 1] - vertices[in0 + 1], vertices[in2 + 2] - vertices[in0 + 2]);
		glm::vec3 normal = glm::cross(v1, v2);
		normal = glm::normalize(normal);

		in0 += normalOffset; in1 += normalOffset; in2 += normalOffset;
		vertices[in0] += normal.x; vertices[in0 + 1] += normal.y; vertices[in0 + 2] += normal.z;
		vertices[in1] += normal.x; vertices[in1 + 1] += normal.y; vertices[in1 + 2] += normal.z;
		vertices[in2] += normal.x; vertices[in2 + 1] += normal.y; vertices[in2 + 2] += normal.z;
	}

	for (size_t i = 0; i < verticeCount / vLength; i++)
	{
		unsigned int nOffset = i * vLength + normalOffset;
		glm::vec3 vec(vertices[nOffset], vertices[nOffset + 1], vertices[nOffset + 2]);
		vec = glm::normalize(vec);
		vertices[nOffset] = vec.x; vertices[nOffset + 1] = vec.y; vertices[nOffset + 2] = vec.z;
	}
}


void CreatCastle()
{
	GLfloat vertices[] = {
		// Face # 1
		-1.000000f, 3.000000f, 1.000000f, 0.244436f, 0.830034f, 1.000000f, 0.000000f, 0.000000f,
		-1.000000f, 0.000000f, -1.000000f, 0.017581f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		-1.000000f, 0.000000f, 1.000000f, 0.244436f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 2
		-1.000000f, 3.000000f, -1.000000f, 0.244436f, 0.342596f, 0.000000f, 0.000000f, 1.000000f,
		1.000000f, 0.000000f, -1.000000f, 0.017581f, 0.000000f, 0.000000f, 0.000000f, 1.000000f,
		-1.000000f, 0.000000f, -1.000000f, 0.244436f, 0.000000f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 3
		1.000000f, 3.000000f, -1.000000f, 0.531442f, 0.342596f, -1.000000f, 0.000000f, 0.000000f,
		1.000000f, 0.000000f, 1.000000f, 0.304587f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		1.000000f, 0.000000f, -1.000000f, 0.531442f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 4
		1.000000f, 3.000000f, 1.000000f, 0.818448f, 0.342596f, 0.000000f, 0.000000f, -1.000000f,
		-1.000000f, 0.000000f, 1.000000f, 0.591593f, 0.000000f, 0.000000f, 0.000000f, -1.000000f,
		1.000000f, 0.000000f, 1.000000f, 0.818448f, 0.000000f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 5
		1.000000f, 0.000000f, -1.000000f, 0.800867f, 0.487438f, 0.000000f, 1.000000f, 0.000000f,
		-1.000000f, 0.000000f, 1.000000f, 0.574011f, 0.715895f, 0.000000f, 1.000000f, 0.000000f,
		-1.000000f, 0.000000f, -1.000000f, 0.574011f, 0.487438f, 0.000000f, 1.000000f, 0.000000f,
		// Face # 6
		-1.000000f, 3.000000f, 1.000000f, 0.244436f, 0.830034f, 1.000000f, 1.000000f, 0.000000f,
		-1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.898957f, 1.000000f, 1.000000f, 0.000000f,
		-1.000000f, 3.000000f, -1.000000f, 0.017581f, 0.830034f, 1.000000f, 1.000000f, 0.000000f,
		// Face # 7
		1.155000f, 3.600000f, -1.155000f, 0.549023f, 0.411519f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.287006f, 0.462274f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 3.600000f, 1.155000f, 0.287006f, 0.411519f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 8
		1.000000f, 3.000000f, 1.000000f, 0.818448f, 0.342596f, 0.000000f, 1.000000f, -1.000000f,
		-1.155000f, 3.600000f, 1.155000f, 0.574011f, 0.411519f, 0.000000f, 1.000000f, -1.000000f,
		-1.000000f, 3.000000f, 1.000000f, 0.591593f, 0.342596f, 0.000000f, 1.000000f, -1.000000f,
		// Face # 9
		-1.000000f, 3.000000f, -1.000000f, 0.244436f, 0.342596f, 0.000000f, 1.000000f, 1.000000f,
		1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.411519f, 0.000000f, 1.000000f, 1.000000f,
		1.000000f, 3.000000f, -1.000000f, 0.017581f, 0.342596f, 0.000000f, 1.000000f, 1.000000f,
		// Face # 10
		1.000000f, 3.000000f, -1.000000f, 0.531442f, 0.342596f, -1.000000f, 1.000000f, 0.000000f,
		1.155000f, 3.600000f, 1.155000f, 0.287006f, 0.411519f, -1.000000f, 1.000000f, 0.000000f,
		1.000000f, 3.000000f, 1.000000f, 0.304587f, 0.342596f, -1.000000f, 1.000000f, 0.000000f,
		// Face # 11
		1.155000f, 3.600000f, 1.155000f, 0.836029f, 0.411519f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.574011f, 0.462274f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 3.600000f, 1.155000f, 0.574011f, 0.411519f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 12
		-1.155000f, 3.600000f, -1.155000f, 0.262018f, 0.411519f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.000000f, 0.462274f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.411519f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 13
		-1.155000f, 3.600000f, 1.155000f, 0.262018f, 0.898957f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.000000f, 0.949712f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.898957f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 14
		0.650000f, 4.550000f, 1.155000f, 0.918298f, 0.389326f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, 0.650000f, 0.861017f, 0.331593f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, 1.155000f, 0.918298f, 0.331593f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 15
		1.155000f, 4.550000f, 1.155000f, 0.883136f, 0.628070f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, 1.155000f, 0.825855f, 0.570336f, 0.000000f, 0.000000f, -1.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.883136f, 0.570336f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 16
		1.155000f, 4.550000f, 0.650000f, 0.918298f, 0.223530f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.861017f, 0.165796f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 0.650000f, 0.918298f, 0.165796f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 17
		0.650000f, 4.550000f, 0.650000f, 0.713561f, 0.964589f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, 0.650000f, 0.656281f, 0.906855f, 0.000000f, 0.000000f, 1.000000f,
		0.650000f, 4.044446f, 0.650000f, 0.713561f, 0.906855f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 18
		0.650000f, 4.550000f, 0.650000f, 0.960369f, 0.741059f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, 1.155000f, 0.903088f, 0.798744f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, 0.650000f, 0.903088f, 0.741059f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 19
		0.650000f, 4.550000f, 0.250000f, 1.000000f, 0.057734f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, -0.250000f, 0.943286f, 0.000000f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, 0.250000f, 1.000000f, 0.000000f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 20
		1.155000f, 4.550000f, 0.250000f, 0.508825f, 0.834204f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, 0.250000f, 0.451544f, 0.776470f, 0.000000f, 0.000000f, -1.000000f,
		1.155000f, 4.044446f, 0.250000f, 0.508825f, 0.776470f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 21
		1.155000f, 4.550000f, -0.250000f, 0.959801f, 0.964589f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 0.250000f, 0.903088f, 0.906855f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, -0.250000f, 0.959801f, 0.906855f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 22
		0.650000f, 4.550000f, -0.250000f, 0.918298f, 0.140632f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -0.250000f, 0.861017f, 0.082898f, 0.000000f, 0.000000f, 1.000000f,
		0.650000f, 4.044446f, -0.250000f, 0.918298f, 0.082898f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 23
		0.650000f, 4.550000f, -0.250000f, 1.000000f, 0.306428f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, 0.250000f, 0.943286f, 0.248743f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, -0.250000f, 1.000000f, 0.248743f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 24
		0.650000f, 4.550000f, -0.650000f, 0.631292f, 0.964589f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, -1.155000f, 0.574011f, 0.906855f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, -0.650000f, 0.631292f, 0.906855f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 25
		1.155000f, 4.550000f, -0.650000f, 0.878099f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, -0.650000f, 0.820819f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		1.155000f, 4.044446f, -0.650000f, 0.878099f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 26
		1.155000f, 4.550000f, -1.155000f, 0.631292f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, -0.650000f, 0.574011f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.631292f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 27
		0.650000f, 4.550000f, -1.155000f, 0.508825f, 0.917102f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.451544f, 0.859368f, 0.000000f, 0.000000f, 1.000000f,
		0.650000f, 4.044446f, -1.155000f, 0.508825f, 0.859368f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 28
		0.650000f, 4.550000f, -1.155000f, 0.878099f, 0.906856f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, -0.650000f, 0.820819f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, -1.155000f, 0.820819f, 0.906856f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 29
		-1.155000f, 4.550000f, 1.155000f, 0.344287f, 0.917102f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, 0.650000f, 0.287006f, 0.859368f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.344287f, 0.859368f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 30
		-0.650000f, 4.550000f, 1.155000f, 0.883136f, 0.710968f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.825855f, 0.653234f, 0.000000f, 0.000000f, -1.000000f,
		-0.650000f, 4.044446f, 1.155000f, 0.883136f, 0.653234f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 31
		-0.650000f, 4.550000f, 0.650000f, 0.426556f, 0.917102f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, 1.155000f, 0.369275f, 0.859368f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, 0.650000f, 0.426556f, 0.859368f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 32
		-1.155000f, 4.550000f, 0.650000f, 0.918298f, 0.306428f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, 0.650000f, 0.861017f, 0.248695f, 0.000000f, 0.000000f, 1.000000f,
		-1.155000f, 4.044446f, 0.650000f, 0.918298f, 0.248695f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 33
		-1.155000f, 4.550000f, 0.650000f, 0.960368f, 0.881643f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, 1.155000f, 0.903088f, 0.823957f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, 0.650000f, 0.960368f, 0.823957f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 34
		-1.155000f, 4.550000f, 0.250000f, 0.964837f, 0.710968f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -0.250000f, 0.908124f, 0.653234f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, 0.250000f, 0.964837f, 0.653234f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 35
		-0.650000f, 4.550000f, 0.250000f, 0.795830f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 0.250000f, 0.738550f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		-0.650000f, 4.044446f, 0.250000f, 0.795830f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 36
		-0.650000f, 4.550000f, -0.250000f, 0.964838f, 0.628070f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, 0.250000f, 0.908124f, 0.570336f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, -0.250000f, 0.964838f, 0.570336f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 37
		-1.155000f, 4.550000f, -0.250000f, 0.344287f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, -0.250000f, 0.287006f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		-1.155000f, 4.044446f, -0.250000f, 0.344287f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 38
		-1.155000f, 4.550000f, -0.250000f, 1.000000f, 0.389278f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, 0.250000f, 0.943286f, 0.331593f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, -0.250000f, 1.000000f, 0.331593f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 39
		-1.155000f, 4.550000f, -0.650000f, 0.713561f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.656281f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -0.650000f, 0.713561f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 40
		-0.650000f, 4.550000f, -0.650000f, 0.878099f, 0.798793f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, -0.650000f, 0.820819f, 0.741059f, 0.000000f, 0.000000f, -1.000000f,
		-0.650000f, 4.044446f, -0.650000f, 0.878099f, 0.741059f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 41
		-0.650000f, 4.550000f, -1.155000f, 0.713561f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, -0.650000f, 0.656281f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, -1.155000f, 0.713561f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 42
		-1.155000f, 4.550000f, -1.155000f, 0.426556f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, -1.155000f, 0.369275f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.426556f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 43
		-1.155000f, 4.550000f, -1.155000f, 0.795830f, 0.906855f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, -0.650000f, 0.738550f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, -1.155000f, 0.738550f, 0.906855f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 44
		-0.250000f, 4.550000f, 1.155000f, 0.631292f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, 0.650000f, 0.574011f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, 1.155000f, 0.631292f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 45
		0.250000f, 4.550000f, 1.155000f, 0.964838f, 0.545172f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.044446f, 1.155000f, 0.908124f, 0.487438f, 0.000000f, 0.000000f, -1.000000f,
		0.250000f, 4.044446f, 1.155000f, 0.964838f, 0.487438f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 46
		0.250000f, 4.550000f, 0.650000f, 0.918298f, 0.057734f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, 1.155000f, 0.861017f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, 0.650000f, 0.918298f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 47
		-0.250000f, 4.550000f, 0.650000f, 0.508258f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.044446f, 0.650000f, 0.451544f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		-0.250000f, 4.044446f, 0.650000f, 0.508258f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 48
		-0.250000f, 4.550000f, 0.650000f, 1.000000f, 0.165748f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, 1.155000f, 0.943286f, 0.223433f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, 0.650000f, 0.943286f, 0.165748f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 49
		-0.250000f, 4.550000f, -0.650000f, 0.883136f, 0.545172f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, -1.155000f, 0.825855f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, -0.650000f, 0.883136f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 50
		0.250000f, 4.550000f, -0.650000f, 0.425421f, 1.000000f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.044446f, -0.650000f, 0.368708f, 0.942266f, 0.000000f, 0.000000f, -1.000000f,
		0.250000f, 4.044446f, -0.650000f, 0.425421f, 0.942266f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 51
		0.250000f, 4.550000f, -1.155000f, 0.795830f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, -0.650000f, 0.738550f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, -1.155000f, 0.795830f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 52
		-0.250000f, 4.550000f, -1.155000f, 0.343719f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.044446f, -1.155000f, 0.287006f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		-0.250000f, 4.044446f, -1.155000f, 0.343720f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 53
		-0.250000f, 4.550000f, -1.155000f, 1.000000f, 0.082898f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, -0.650000f, 0.943286f, 0.140583f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, -1.155000f, 0.943286f, 0.082898f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 54
		-1.155000f, 4.044446f, 1.155000f, 0.549023f, 0.751305f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.287006f, 0.487438f, 0.000000f, -1.000000f, 0.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.549023f, 0.487438f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 55
		-1.000000f, 3.000000f, 1.000000f, 0.244436f, 0.830034f, 1.000000f, 0.000000f, 0.000000f,
		-1.000000f, 3.000000f, -1.000000f, 0.017581f, 0.830034f, 1.000000f, 0.000000f, 0.000000f,
		-1.000000f, 0.000000f, -1.000000f, 0.017581f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 56
		-1.000000f, 3.000000f, -1.000000f, 0.244436f, 0.342596f, 0.000000f, 0.000000f, 1.000000f,
		1.000000f, 3.000000f, -1.000000f, 0.017581f, 0.342596f, 0.000000f, 0.000000f, 1.000000f,
		1.000000f, 0.000000f, -1.000000f, 0.017581f, 0.000000f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 57
		1.000000f, 3.000000f, -1.000000f, 0.531442f, 0.342596f, -1.000000f, 0.000000f, 0.000000f,
		1.000000f, 3.000000f, 1.000000f, 0.304587f, 0.342596f, -1.000000f, 0.000000f, 0.000000f,
		1.000000f, 0.000000f, 1.000000f, 0.304587f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 58
		1.000000f, 3.000000f, 1.000000f, 0.818448f, 0.342596f, 0.000000f, 0.000000f, -1.000000f,
		-1.000000f, 3.000000f, 1.000000f, 0.591593f, 0.342596f, 0.000000f, 0.000000f, -1.000000f,
		-1.000000f, 0.000000f, 1.000000f, 0.591593f, 0.000000f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 59
		1.000000f, 0.000000f, -1.000000f, 0.800867f, 0.487438f, 0.000000f, 1.000000f, 0.000000f,
		1.000000f, 0.000000f, 1.000000f, 0.800867f, 0.715895f, 0.000000f, 1.000000f, 0.000000f,
		-1.000000f, 0.000000f, 1.000000f, 0.574011f, 0.715895f, 0.000000f, 1.000000f, 0.000000f,
		// Face # 60
		-1.000000f, 3.000000f, 1.000000f, 0.244436f, 0.830034f, 1.000000f, 1.000000f, 0.000000f,
		-1.155000f, 3.600000f, 1.155000f, 0.262018f, 0.898957f, 1.000000f, 1.000000f, 0.000000f,
		-1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.898957f, 1.000000f, 1.000000f, 0.000000f,
		// Face # 61
		1.155000f, 3.600000f, -1.155000f, 0.549023f, 0.411519f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.549023f, 0.462274f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.287006f, 0.462274f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 62
		1.000000f, 3.000000f, 1.000000f, 0.818448f, 0.342596f, 0.000000f, 1.000000f, -1.000000f,
		1.155000f, 3.600000f, 1.155000f, 0.836029f, 0.411519f, 0.000000f, 1.000000f, -1.000000f,
		-1.155000f, 3.600000f, 1.155000f, 0.574011f, 0.411519f, 0.000000f, 1.000000f, -1.000000f,
		// Face # 63
		-1.000000f, 3.000000f, -1.000000f, 0.244436f, 0.342596f, 0.000000f, 1.000000f, 1.000000f,
		-1.155000f, 3.600000f, -1.155000f, 0.262018f, 0.411519f, 0.000000f, 1.000000f, 1.000000f,
		1.155000f, 3.600000f, -1.155000f, 0.000000f, 0.411519f, 0.000000f, 1.000000f, 1.000000f,
		// Face # 64
		1.000000f, 3.000000f, -1.000000f, 0.531442f, 0.342596f, -1.000000f, 1.000000f, 0.000000f,
		1.155000f, 3.600000f, -1.155000f, 0.549023f, 0.411519f, -1.000000f, 1.000000f, 0.000000f,
		1.155000f, 3.600000f, 1.155000f, 0.287006f, 0.411519f, -1.000000f, 1.000000f, 0.000000f,
		// Face # 65
		1.155000f, 3.600000f, 1.155000f, 0.836029f, 0.411519f, 0.000000f, 0.000000f, -1.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.836029f, 0.462274f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.574011f, 0.462274f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 66
		-1.155000f, 3.600000f, -1.155000f, 0.262018f, 0.411519f, 0.000000f, 0.000000f, 1.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.262018f, 0.462274f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.000000f, 0.462274f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 67
		-1.155000f, 3.600000f, 1.155000f, 0.262018f, 0.898957f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.262018f, 0.949712f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.000000f, 0.949712f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 68
		0.650000f, 4.550000f, 1.155000f, 0.918298f, 0.389326f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.550000f, 0.650000f, 0.861017f, 0.389326f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, 0.650000f, 0.861017f, 0.331593f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 69
		1.155000f, 4.550000f, 1.155000f, 0.883136f, 0.628070f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.550000f, 1.155000f, 0.825855f, 0.628070f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, 1.155000f, 0.825855f, 0.570336f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 70
		1.155000f, 4.550000f, 0.650000f, 0.918298f, 0.223530f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.550000f, 1.155000f, 0.861017f, 0.223530f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.861017f, 0.165796f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 71
		0.650000f, 4.550000f, 0.650000f, 0.713561f, 0.964589f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.550000f, 0.650000f, 0.656281f, 0.964589f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, 0.650000f, 0.656281f, 0.906855f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 72
		0.650000f, 4.550000f, 0.650000f, 0.960369f, 0.741059f, 0.000000f, -1.000000f, 0.000000f,
		0.650000f, 4.550000f, 1.155000f, 0.960369f, 0.798744f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, 1.155000f, 0.903088f, 0.798744f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 73
		0.650000f, 4.550000f, 0.250000f, 1.000000f, 0.057734f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.550000f, -0.250000f, 0.943286f, 0.057734f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, -0.250000f, 0.943286f, 0.000000f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 74
		1.155000f, 4.550000f, 0.250000f, 0.508825f, 0.834204f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.550000f, 0.250000f, 0.451544f, 0.834204f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, 0.250000f, 0.451544f, 0.776470f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 75
		1.155000f, 4.550000f, -0.250000f, 0.959801f, 0.964589f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.550000f, 0.250000f, 0.903088f, 0.964589f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, 0.250000f, 0.903088f, 0.906855f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 76
		0.650000f, 4.550000f, -0.250000f, 0.918298f, 0.140632f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.550000f, -0.250000f, 0.861017f, 0.140632f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -0.250000f, 0.861017f, 0.082898f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 77
		0.650000f, 4.550000f, -0.250000f, 1.000000f, 0.306428f, 0.000000f, -1.000000f, 0.000000f,
		0.650000f, 4.550000f, 0.250000f, 0.943286f, 0.306428f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, 0.250000f, 0.943286f, 0.248743f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 78
		0.650000f, 4.550000f, -0.650000f, 0.631292f, 0.964589f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.550000f, -1.155000f, 0.574011f, 0.964589f, 1.000000f, 0.000000f, 0.000000f,
		0.650000f, 4.044446f, -1.155000f, 0.574011f, 0.906855f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 79
		1.155000f, 4.550000f, -0.650000f, 0.878099f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.550000f, -0.650000f, 0.820819f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		0.650000f, 4.044446f, -0.650000f, 0.820819f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 80
		1.155000f, 4.550000f, -1.155000f, 0.631292f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.550000f, -0.650000f, 0.574011f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		1.155000f, 4.044446f, -0.650000f, 0.574011f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 81
		0.650000f, 4.550000f, -1.155000f, 0.508825f, 0.917102f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.550000f, -1.155000f, 0.451544f, 0.917102f, 0.000000f, 0.000000f, 1.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.451544f, 0.859368f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 82
		0.650000f, 4.550000f, -1.155000f, 0.878099f, 0.906856f, 0.000000f, -1.000000f, 0.000000f,
		0.650000f, 4.550000f, -0.650000f, 0.878099f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.550000f, -0.650000f, 0.820819f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 83
		-1.155000f, 4.550000f, 1.155000f, 0.344287f, 0.917102f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.550000f, 0.650000f, 0.287006f, 0.917102f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, 0.650000f, 0.287006f, 0.859368f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 84
		-0.650000f, 4.550000f, 1.155000f, 0.883136f, 0.710968f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.550000f, 1.155000f, 0.825855f, 0.710968f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 1.155000f, 0.825855f, 0.653234f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 85
		-0.650000f, 4.550000f, 0.650000f, 0.426556f, 0.917102f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.550000f, 1.155000f, 0.369275f, 0.917102f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, 1.155000f, 0.369275f, 0.859368f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 86
		-1.155000f, 4.550000f, 0.650000f, 0.918298f, 0.306428f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.550000f, 0.650000f, 0.861017f, 0.306428f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, 0.650000f, 0.861017f, 0.248695f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 87
		-1.155000f, 4.550000f, 0.650000f, 0.960368f, 0.881643f, 0.000000f, -1.000000f, 0.000000f,
		-1.155000f, 4.550000f, 1.155000f, 0.903088f, 0.881643f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, 1.155000f, 0.903088f, 0.823957f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 88
		-1.155000f, 4.550000f, 0.250000f, 0.964837f, 0.710968f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.550000f, -0.250000f, 0.908124f, 0.710968f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -0.250000f, 0.908124f, 0.653234f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 89
		-0.650000f, 4.550000f, 0.250000f, 0.795830f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.550000f, 0.250000f, 0.738550f, 0.881691f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, 0.250000f, 0.738550f, 0.823957f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 90
		-0.650000f, 4.550000f, -0.250000f, 0.964838f, 0.628070f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.550000f, 0.250000f, 0.908124f, 0.628070f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, 0.250000f, 0.908124f, 0.570336f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 91
		-1.155000f, 4.550000f, -0.250000f, 0.344287f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.550000f, -0.250000f, 0.287006f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, -0.250000f, 0.287006f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 92
		-1.155000f, 4.550000f, -0.250000f, 1.000000f, 0.389278f, 0.000000f, -1.000000f, 0.000000f,
		-1.155000f, 4.550000f, 0.250000f, 0.943286f, 0.389278f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, 0.250000f, 0.943286f, 0.331593f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 93
		-1.155000f, 4.550000f, -0.650000f, 0.713561f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.550000f, -1.155000f, 0.656281f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-1.155000f, 4.044446f, -1.155000f, 0.656281f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 94
		-0.650000f, 4.550000f, -0.650000f, 0.878099f, 0.798793f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.550000f, -0.650000f, 0.820819f, 0.798793f, 0.000000f, 0.000000f, -1.000000f,
		-1.155000f, 4.044446f, -0.650000f, 0.820819f, 0.741059f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 95
		-0.650000f, 4.550000f, -1.155000f, 0.713561f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.550000f, -0.650000f, 0.656281f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		-0.650000f, 4.044446f, -0.650000f, 0.656281f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 96
		-1.155000f, 4.550000f, -1.155000f, 0.426556f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.550000f, -1.155000f, 0.369275f, 0.834204f, 0.000000f, 0.000000f, 1.000000f,
		-0.650000f, 4.044446f, -1.155000f, 0.369275f, 0.776470f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 97
		-1.155000f, 4.550000f, -1.155000f, 0.795830f, 0.906855f, 0.000000f, -1.000000f, 0.000000f,
		-1.155000f, 4.550000f, -0.650000f, 0.795830f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		-0.650000f, 4.550000f, -0.650000f, 0.738550f, 0.964541f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 98
		-0.250000f, 4.550000f, 1.155000f, 0.631292f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.550000f, 0.650000f, 0.574011f, 0.881691f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, 0.650000f, 0.574011f, 0.823957f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 99
		0.250000f, 4.550000f, 1.155000f, 0.964838f, 0.545172f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.550000f, 1.155000f, 0.908124f, 0.545172f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.044446f, 1.155000f, 0.908124f, 0.487438f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 100
		0.250000f, 4.550000f, 0.650000f, 0.918298f, 0.057734f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.550000f, 1.155000f, 0.861017f, 0.057734f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, 1.155000f, 0.861017f, 0.000000f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 101
		-0.250000f, 4.550000f, 0.650000f, 0.508258f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.550000f, 0.650000f, 0.451544f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.044446f, 0.650000f, 0.451544f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 102
		-0.250000f, 4.550000f, 0.650000f, 1.000000f, 0.165748f, 0.000000f, -1.000000f, 0.000000f,
		-0.250000f, 4.550000f, 1.155000f, 1.000000f, 0.223433f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, 1.155000f, 0.943286f, 0.223433f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 103
		-0.250000f, 4.550000f, -0.650000f, 0.883136f, 0.545172f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.550000f, -1.155000f, 0.825855f, 0.545172f, 1.000000f, 0.000000f, 0.000000f,
		-0.250000f, 4.044446f, -1.155000f, 0.825855f, 0.487438f, 1.000000f, 0.000000f, 0.000000f,
		// Face # 104
		0.250000f, 4.550000f, -0.650000f, 0.425421f, 1.000000f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.550000f, -0.650000f, 0.368708f, 1.000000f, 0.000000f, 0.000000f, -1.000000f,
		-0.250000f, 4.044446f, -0.650000f, 0.368708f, 0.942266f, 0.000000f, 0.000000f, -1.000000f,
		// Face # 105
		0.250000f, 4.550000f, -1.155000f, 0.795830f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.550000f, -0.650000f, 0.738550f, 0.798793f, -1.000000f, 0.000000f, 0.000000f,
		0.250000f, 4.044446f, -0.650000f, 0.738550f, 0.741059f, -1.000000f, 0.000000f, 0.000000f,
		// Face # 106
		-0.250000f, 4.550000f, -1.155000f, 0.343719f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.550000f, -1.155000f, 0.287006f, 1.000000f, 0.000000f, 0.000000f, 1.000000f,
		0.250000f, 4.044446f, -1.155000f, 0.287006f, 0.942266f, 0.000000f, 0.000000f, 1.000000f,
		// Face # 107
		-0.250000f, 4.550000f, -1.155000f, 1.000000f, 0.082898f, 0.000000f, -1.000000f, 0.000000f,
		-0.250000f, 4.550000f, -0.650000f, 1.000000f, 0.140583f, 0.000000f, -1.000000f, 0.000000f,
		0.250000f, 4.550000f, -0.650000f, 0.943286f, 0.140583f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 108
		-1.155000f, 4.044446f, 1.155000f, 0.549023f, 0.751305f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.044446f, 1.155000f, 0.287006f, 0.751305f, 0.000000f, -1.000000f, 0.000000f,
		1.155000f, 4.044446f, -1.155000f, 0.287006f, 0.487438f, 0.000000f, -1.000000f, 0.000000f,
	};

	unsigned int indices[] = {
		// Face #0
		0, 1, 2,
		// Face #3
		3, 4, 5,
		// Face #6
		6, 7, 8,
		// Face #9
		9, 10, 11,
		// Face #12
		12, 13, 14,
		// Face #15
		15, 16, 17,
		// Face #18
		18, 19, 20,
		// Face #21
		21, 22, 23,
		// Face #24
		24, 25, 26,
		// Face #27
		27, 28, 29,
		// Face #30
		30, 31, 32,
		// Face #33
		33, 34, 35,
		// Face #36
		36, 37, 38,
		// Face #39
		39, 40, 41,
		// Face #42
		42, 43, 44,
		// Face #45
		45, 46, 47,
		// Face #48
		48, 49, 50,
		// Face #51
		51, 52, 53,
		// Face #54
		54, 55, 56,
		// Face #57
		57, 58, 59,
		// Face #60
		60, 61, 62,
		// Face #63
		63, 64, 65,
		// Face #66
		66, 67, 68,
		// Face #69
		69, 70, 71,
		// Face #72
		72, 73, 74,
		// Face #75
		75, 76, 77,
		// Face #78
		78, 79, 80,
		// Face #81
		81, 82, 83,
		// Face #84
		84, 85, 86,
		// Face #87
		87, 88, 89,
		// Face #90
		90, 91, 92,
		// Face #93
		93, 94, 95,
		// Face #96
		96, 97, 98,
		// Face #99
		99, 100, 101,
		// Face #102
		102, 103, 104,
		// Face #105
		105, 106, 107,
		// Face #108
		108, 109, 110,
		// Face #111
		111, 112, 113,
		// Face #114
		114, 115, 116,
		// Face #117
		117, 118, 119,
		// Face #120
		120, 121, 122,
		// Face #123
		123, 124, 125,
		// Face #126
		126, 127, 128,
		// Face #129
		129, 130, 131,
		// Face #132
		132, 133, 134,
		// Face #135
		135, 136, 137,
		// Face #138
		138, 139, 140,
		// Face #141
		141, 142, 143,
		// Face #144
		144, 145, 146,
		// Face #147
		147, 148, 149,
		// Face #150
		150, 151, 152,
		// Face #153
		153, 154, 155,
		// Face #156
		156, 157, 158,
		// Face #159
		159, 160, 161,
		// Face #162
		162, 163, 164,
		// Face #165
		165, 166, 167,
		// Face #168
		168, 169, 170,
		// Face #171
		171, 172, 173,
		// Face #174
		174, 175, 176,
		// Face #177
		177, 178, 179,
		// Face #180
		180, 181, 182,
		// Face #183
		183, 184, 185,
		// Face #186
		186, 187, 188,
		// Face #189
		189, 190, 191,
		// Face #192
		192, 193, 194,
		// Face #195
		195, 196, 197,
		// Face #198
		198, 199, 200,
		// Face #201
		201, 202, 203,
		// Face #204
		204, 205, 206,
		// Face #207
		207, 208, 209,
		// Face #210
		210, 211, 212,
		// Face #213
		213, 214, 215,
		// Face #216
		216, 217, 218,
		// Face #219
		219, 220, 221,
		// Face #222
		222, 223, 224,
		// Face #225
		225, 226, 227,
		// Face #228
		228, 229, 230,
		// Face #231
		231, 232, 233,
		// Face #234
		234, 235, 236,
		// Face #237
		237, 238, 239,
		// Face #240
		240, 241, 242,
		// Face #243
		243, 244, 245,
		// Face #246
		246, 247, 248,
		// Face #249
		249, 250, 251,
		// Face #252
		252, 253, 254,
		// Face #255
		255, 256, 257,
		// Face #258
		258, 259, 260,
		// Face #261
		261, 262, 263,
		// Face #264
		264, 265, 266,
		// Face #267
		267, 268, 269,
		// Face #270
		270, 271, 272,
		// Face #273
		273, 274, 275,
		// Face #276
		276, 277, 278,
		// Face #279
		279, 280, 281,
		// Face #282
		282, 283, 284,
		// Face #285
		285, 286, 287,
		// Face #288
		288, 289, 290,
		// Face #291
		291, 292, 293,
		// Face #294
		294, 295, 296,
		// Face #297
		297, 298, 299,
		// Face #300
		300, 301, 302,
		// Face #303
		303, 304, 305,
		// Face #306
		306, 307, 308,
		// Face #309
		309, 310, 311,
		// Face #312
		312, 313, 314,
		// Face #315
		315, 316, 317,
		// Face #318
		318, 319, 320,
		// Face #321
		321, 322, 323,
	};


	Mesh* obj1 = new Mesh();
	obj1->CreateMesh(vertices, indices, 2592, 966);
	meshList.push_back(obj1);
}

void CreatHallway()
{
	GLfloat vertices[] = {
		// Face # 1
		-0.212132f, 1.000000f, -2.787868f, 1.000000f, 0.483934f, 1.000000f, 0.000000f, 1.000000f,
		0.212132f, 0.000000f, -3.212132f, 0.850472f, 0.248232f, 1.000000f, 0.000000f, 1.000000f,
		-0.212132f, 0.000000f, -2.787868f, 1.000000f, 0.248232f, 1.000000f, 0.000000f, 1.000000f,
		// Face # 2
		0.212132f, 1.000000f, -3.212132f, 0.262461f, 1.000000f, -1.000000f, 0.000000f, 1.000000f,
		3.212132f, 0.000000f, -0.212132f, 0.511674f, 0.000000f, -1.000000f, 0.000000f, 1.000000f,
		0.212132f, 0.000000f, -3.212132f, 0.511674f, 1.000000f, -1.000000f, 0.000000f, 1.000000f,
		// Face # 3
		3.212132f, 1.000000f, -0.212132f, 1.000000f, 0.235702f, -1.000000f, 0.000000f, -1.000000f,
		2.787868f, 0.000000f, 0.212132f, 0.850472f, 0.000000f, -1.000000f, 0.000000f, -1.000000f,
		3.212132f, 0.000000f, -0.212132f, 1.000000f, 0.000000f, -1.000000f, 0.000000f, -1.000000f,
		// Face # 4
		2.787868f, 1.000000f, 0.212132f, 0.000000f, 1.000000f, 1.000000f, 0.000000f, -1.000000f,
		-0.212132f, 0.000000f, -2.787868f, 0.249213f, 0.000000f, 1.000000f, 0.000000f, -1.000000f,
		2.787868f, 0.000000f, 0.212132f, 0.249213f, 1.000000f, 1.000000f, 0.000000f, -1.000000f,
		// Face # 5
		3.212132f, 0.000000f, -0.212132f, 0.524921f, 0.000000f, 0.000000f, 1.000000f, 0.000000f,
		-0.212132f, 0.000000f, -2.787868f, 0.674449f, 1.000000f, 0.000000f, 1.000000f, 0.000000f,
		0.212132f, 0.000000f, -3.212132f, 0.524921f, 1.000000f, 0.000000f, 1.000000f, 0.000000f,
		// Face # 6
		0.212132f, 1.000000f, -3.212132f, 0.687697f, 0.000000f, 0.000000f, -1.000000f, 0.000000f,
		2.787868f, 1.000000f, 0.212132f, 0.837225f, 1.000000f, 0.000000f, -1.000000f, 0.000000f,
		3.212132f, 1.000000f, -0.212132f, 0.687697f, 1.000000f, 0.000000f, -1.000000f, 0.000000f,
		// Face # 7
		-0.212132f, 1.000000f, -2.787868f, 1.000000f, 0.483934f, 1.000000f, 0.000000f, 1.000000f,
		0.212132f, 1.000000f, -3.212132f, 0.850472f, 0.483934f, 1.000000f, 0.000000f, 1.000000f,
		0.212132f, 0.000000f, -3.212132f, 0.850472f, 0.248232f, 1.000000f, 0.000000f, 1.000000f,
		// Face # 8
		0.212132f, 1.000000f, -3.212132f, 0.262461f, 1.000000f, -1.000000f, 0.000000f, 1.000000f,
		3.212132f, 1.000000f, -0.212132f, 0.262461f, 0.000000f, -1.000000f, 0.000000f, 1.000000f,
		3.212132f, 0.000000f, -0.212132f, 0.511674f, 0.000000f, -1.000000f, 0.000000f, 1.000000f,
		// Face # 9
		3.212132f, 1.000000f, -0.212132f, 1.000000f, 0.235702f, -1.000000f, 0.000000f, -1.000000f,
		2.787868f, 1.000000f, 0.212132f, 0.850472f, 0.235702f, -1.000000f, 0.000000f, -1.000000f,
		2.787868f, 0.000000f, 0.212132f, 0.850472f, 0.000000f, -1.000000f, 0.000000f, -1.000000f,
		// Face # 10
		2.787868f, 1.000000f, 0.212132f, 0.000000f, 1.000000f, 1.000000f, 0.000000f, -1.000000f,
		-0.212132f, 1.000000f, -2.787868f, 0.000000f, 0.000000f, 1.000000f, 0.000000f, -1.000000f,
		-0.212132f, 0.000000f, -2.787868f, 0.249213f, 0.000000f, 1.000000f, 0.000000f, -1.000000f,
		// Face # 11
		3.212132f, 0.000000f, -0.212132f, 0.524921f, 0.000000f, 0.000000f, 1.000000f, 0.000000f,
		2.787868f, 0.000000f, 0.212132f, 0.674449f, 0.000000f, 0.000000f, 1.000000f, 0.000000f,
		-0.212132f, 0.000000f, -2.787868f, 0.674449f, 1.000000f, 0.000000f, 1.000000f, 0.000000f,
		// Face # 12
		0.212132f, 1.000000f, -3.212132f, 0.687697f, 0.000000f, 0.000000f, -1.000000f, 0.000000f,
		-0.212132f, 1.000000f, -2.787868f, 0.837225f, 0.000000f, 0.000000f, -1.000000f, 0.000000f,
		2.787868f, 1.000000f, 0.212132f, 0.837225f, 1.000000f, 0.000000f, -1.000000f, 0.000000f,
	};

	unsigned int indices[] = {
		// Face #0
		0, 1, 2,
		// Face #3
		3, 4, 5,
		// Face #6
		6, 7, 8,
		// Face #9
		9, 10, 11,
		// Face #12
		12, 13, 14,
		// Face #15
		15, 16, 17,
		// Face #18
		18, 19, 20,
		// Face #21
		21, 22, 23,
		// Face #24
		24, 25, 26,
		// Face #27
		27, 28, 29,
		// Face #30
		30, 31, 32,
		// Face #33
		33, 34, 35,
	};


	Mesh* obj1 = new Mesh();
	obj1->CreateMesh(vertices, indices, 288, 102);
	meshList.push_back(obj1);
}


void CreateObjects()
{

	unsigned int floorIndices[] = {
		0, 2, 1,
		1, 2, 3
	};

	GLfloat floorVertices[] = {
		-10.0f, 0.0f, -10.0f,	0.0f, 0.0f,		0.0f, -1.0f, 0.0f,
		10.0f, 0.0f, -10.0f,	10.0f, 0.0f,	0.0f, -1.0f, 0.0f,
		-10.0f, 0.0f, 10.0f,	0.0f, 10.0f,	0.0f, -1.0f, 0.0f,
		10.0f, 0.0f, 10.0f,		10.0f, 10.0f,	0.0f, -1.0f, 0.0f
	};

	unsigned int scoreIndices[] = {
	   0, 1, 2,
	   0, 2, 3,
	};

	GLfloat scoreVertices[] = {
		-0.5f, 0.0f, 0.5f,		0.0f, 0.0f,		0.0f, -1.0f, 0.0f,
		0.5f, 0.0f, 0.5f,		1.0f, 0.0f,		0.0f, -1.0f, 0.0f,
		0.5f, 0.0f, -0.5f,		1.0f, 1.0f,		0.0f, -1.0f, 0.0f,
		-0.5f, 0.0f, -0.5f,		0.0f, 1.0f,		0.0f, -1.0f, 0.0f,

	};

	unsigned int numeroIndices[] = {
	   0, 1, 2,
	   0, 2, 3,
	};

	GLfloat numeroVertices[] = {
		-0.5f, 0.0f, 0.5f,		0.0f, 0.67f,		0.0f, -1.0f, 0.0f,
		0.5f, 0.0f, 0.5f,		0.25f, 0.67f,		0.0f, -1.0f, 0.0f,
		0.5f, 0.0f, -0.5f,		0.25f, 1.0f,		0.0f, -1.0f, 0.0f,
		-0.5f, 0.0f, -0.5f,		0.0f, 1.0f,		0.0f, -1.0f, 0.0f,

	};

	Mesh* obj3 = new Mesh();
	obj3->CreateMesh(floorVertices, floorIndices, 32, 6);
	meshList.push_back(obj3);

	Mesh* obj6 = new Mesh();
	obj6->CreateMesh(scoreVertices, scoreIndices, 32, 6);
	meshList.push_back(obj6);

	Mesh* obj7 = new Mesh();
	obj7->CreateMesh(numeroVertices, numeroIndices, 32, 6);
	meshList.push_back(obj7);

}

void CreateShaders()
{
	Shader* shader1 = new Shader();
	shader1->CreateFromFiles(vShader, fShader);
	shaderList.push_back(*shader1);
}


bool handleVecEdition(glm::vec3& v, float offset, float deltaTime)
{
	bool changes = true;
	if (mainWindow.getsKeys()[GLFW_KEY_LEFT])
		v.x += offset * deltaTime;
	else if (mainWindow.getsKeys()[GLFW_KEY_RIGHT])
		v.x -= offset * deltaTime;
	else if (mainWindow.getsKeys()[GLFW_KEY_LEFT_SHIFT] && mainWindow.getsKeys()[GLFW_KEY_UP])
		v.y += offset * deltaTime;
	else if (mainWindow.getsKeys()[GLFW_KEY_LEFT_SHIFT] && mainWindow.getsKeys()[GLFW_KEY_DOWN])
		v.y -= offset * deltaTime;
	else if (mainWindow.getsKeys()[GLFW_KEY_UP])
		v.z += offset * deltaTime;
	else if (mainWindow.getsKeys()[GLFW_KEY_DOWN])
		v.z -= offset * deltaTime;
	else
		changes = false;

	return changes;
}

float animateFliper(Key key, float rotation, float deltaTime)
{
	if (key.IsHold() == false && rotation == 0)
		return 0.0f;

	float rotationSpeed = 0.0f;
	if (rotation < 70.0f && key.IsHold() == true)
		rotationSpeed = 7.0f;
	else if (rotation >= 70.0f && key.IsHold() == true)
		rotationSpeed = 0.0f;
	else if (rotation > 0.0f && key.IsHold() == false)
		rotationSpeed = -7.0f;
	else
		return 0.0f;

	rotation += rotationSpeed * deltaTime;
	return rotation;
}

int main()
{
	const int stepsPerFrame = 5;
	Animation animation = Animation("MarbleAnimation.txt");

	Animation animation2 = Animation("Marble2Animation.txt");

	mainWindow = Window(1366, 768); // 1280, 1024 or 1024, 768
	mainWindow.Initialise();

	CreatCastle();
	CreatHallway();
	CreateObjects();
	CreateShaders();

	camera = Camera(glm::vec3(0.0f, 10.0f, 0.0f), glm::vec3(0.0f, 1.0f, 0.0f), -60.0f, 0.0f, 0.5f, 0.5f);

	dirtTexture = Texture("Textures/Snow_Color.png");
	dirtTexture.LoadTextureA();
	castleTexture = Texture("Textures/Castle_Color.png");
	castleTexture.LoadTextureA();
	hallwayTexture = Texture("Textures/Hallway_Color.png");
	hallwayTexture.LoadTextureA();

	std::vector<std::string> skyboxFaces;
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayLeft.tga");
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayRight.tga");
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayDown.tga");
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayUp.tga");
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayBack.tga");
	skyboxFaces.push_back("Textures/Skybox/SkyboxDayFront.tga");
	skybox = Skybox(skyboxFaces);

	glass = Model();
	glass.LoadModel("Models/Glass.obj");
	marble = Model();
	marble.LoadModel("Models/Marble.obj");
	house01 = Model();
	house01.LoadModel("Models/House01.obj");
	house02 = Model();
	house02.LoadModel("Models/House02.obj");
	house03 = Model();
	house03.LoadModel("Models/House03.obj");
	house01Spin = Model();
	house01Spin.LoadModel("Models/House1Spin.obj");
	fliper = Model();
	fliper.LoadModel("Models/Fliper.obj");
	fliperGateMetal = Model();
	fliperGateMetal.LoadModel("Models/FliperGateMetal.obj");
	fliperGateWood = Model();
	fliperGateWood.LoadModel("Models/FliperGateWood.obj");
	machine = Model();
	machine.LoadModel("Models/Pinball.obj");
	vampArm = Model();
	vampArm.LoadModel("Models/VampArm.obj");
	vamp = Model();
	vamp.LoadModel("Models/Vamp.obj");
	tree = Model();
	tree.LoadModel("Models/Tree.obj");
	cow = Model();
	cow.LoadModel("Models/CowBody.obj");
	cowArm = Model();
	cowArm.LoadModel("Models/CowLeg.obj");
	cowHead = Model();
	cowHead.LoadModel("Models/CowHead.obj");
	screw = Model();
	screw.LoadModel("Models/Screw.obj");
	lever = Model();
	lever.LoadModel("Models/Lever.obj");


	Material_brillante = Material(4.0f, 256);
	Material_opaco = Material(0.3f, 4);


	mainLight = DirectionalLight(1.0f, 1.0f, 1.0f,
		0.5f, 0.3f,
		0.0f, 0.0f, -1.0f);
	unsigned int pointLightCount = 0;

	unsigned int spotLightCount = 0;
	spotLights[0] = SpotLight(1.0f, 1.0f, 1.0f,
		0.0f, 2.0f,
		0.0f, 0.0f, 0.0f,
		0.0f, -1.0f, 0.0f,
		1.0f, 0.0f, 0.0f,
		5.0f);
	spotLightCount++;


	GLuint uniformProjection = 0, uniformModel = 0, uniformView = 0, uniformEyePosition = 0,
		uniformSpecularIntensity = 0, uniformShininess = 0, uniformTextureOffset = 0;
	GLuint uniformColor = 0;
	glm::mat4 projection = glm::perspective(45.0f, (GLfloat)mainWindow.getBufferWidth() / mainWindow.getBufferHeight(), 0.1f, 1000.0f);

	int animationState = 0;
	const float frameWait = 1.0f / 24.0f;
	float animationTime = 0.0f;
	int currentFrame = 0;
	int currentKeyframe = 0;
	int aKey = -1;
	const int totalFrames = 45;
	int totalKeyframes = 9;
	const float animationOffset = 0.05f;

	glm::vec3 editablePosition = glm::vec3(0.0f, 0.0f, 0.0f);
	glm::vec3 editableRotation = glm::vec3(0.0f, 0.0f, 0.0f);
	glm::vec3 editableScale = glm::vec3(1.0f, 1.0f, 1.0f);

	glm::vec3 auxEditablePosition = glm::vec3(0.0f, 0.0f, 0.0f);
	glm::vec3 auxEditableRotation = glm::vec3(0.0f, 0.0f, 0.0f);
	glm::vec3 auxEditableScale = glm::vec3(1.0f, 1.0f, 1.0f);

	Frame auxFrame;
	glm::vec3 auxVector;
	float castleRotation = 0;
	float house1Rotation = 0;
	float fliper1 = 0, fliper2 = 0, fliper3 = 0, fliper4 = 0;
	float vamp1 = 100, vamp2 = 0, vamp3 = 0, vamp4 = 0;
	Key fliper1Key = Key();
	Key fliper2Key = Key();
	Key fliper3Key = Key();
	Key fliper4Key = Key();

	bool sentido = false;

	while (!mainWindow.getShouldClose())
	{
		GLfloat now = glfwGetTime();
		deltaTime = now - lastTime;
		deltaTime += (now - lastTime) / limitFPS;
		lastTime = now;

		//Recibir eventos del usuario
		glfwPollEvents();
		camera.keyControl(mainWindow.getsKeys(), deltaTime);
		camera.mouseControl(mainWindow.getXChange(), mainWindow.getYChange());

		// Clear the window
		glClearColor(0.0f, 0.0f, 0.0f, 1.0f);
		glClear(GL_COLOR_BUFFER_BIT | GL_DEPTH_BUFFER_BIT);
		skybox.DrawSkybox(camera.calculateViewMatrix(), projection);
		shaderList[0].UseShader();
		uniformModel = shaderList[0].GetModelLocation();
		uniformProjection = shaderList[0].GetProjectionLocation();
		uniformView = shaderList[0].GetViewLocation();
		uniformEyePosition = shaderList[0].GetEyePositionLocation();
		uniformColor = shaderList[0].getColorLocation();
		uniformTextureOffset = shaderList[0].getOffsetLocation();

		//información en el shader de intensidad especular y brillo
		uniformSpecularIntensity = shaderList[0].GetSpecularIntensityLocation();
		uniformShininess = shaderList[0].GetShininessLocation();

		//Update keys
		fliper1Key.Update(mainWindow.getsKeys()[GLFW_KEY_Z]);
		fliper2Key.Update(mainWindow.getsKeys()[GLFW_KEY_X]);
		fliper3Key.Update(mainWindow.getsKeys()[GLFW_KEY_C]);
		fliper4Key.Update(mainWindow.getsKeys()[GLFW_KEY_V]);

		glUniformMatrix4fv(uniformProjection, 1, GL_FALSE, glm::value_ptr(projection));
		glUniformMatrix4fv(uniformView, 1, GL_FALSE, glm::value_ptr(camera.calculateViewMatrix()));
		glUniform3f(uniformEyePosition, camera.getCameraPosition().x, camera.getCameraPosition().y, camera.getCameraPosition().z);

		// luz ligada a la cámara de tipo flash
		glm::vec3 lowerLight = camera.getCameraPosition();
		lowerLight.y -= 0.3f;
		spotLights[0].SetFlash(lowerLight, camera.getCameraDirection());

		//información al shader de fuentes de iluminación
		shaderList[0].SetDirectionalLight(&mainLight);
		shaderList[0].SetPointLights(pointLights, pointLightCount);
		shaderList[0].SetSpotLights(spotLights, spotLightCount);

		glm::mat4 model(1.0);
		glm::mat4 modelaux(1.0);
		glm::vec3 color = glm::vec3(1.0f, 1.0f, 1.0f);
		glm::vec2 toffset = glm::vec2(0.0f, 0.0f);

		glUniform2fv(uniformTextureOffset, 1, glm::value_ptr(toffset));
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, -14.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		glUniform3fv(uniformColor, 1, glm::value_ptr(color));
		glUniform2fv(uniformTextureOffset, 1, glm::value_ptr(toffset));
		castleTexture.UseTexture();
		Material_opaco.UseMaterial(uniformSpecularIntensity, uniformShininess);
		meshList[0]->RenderMesh();
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));

		castleRotation += 0.5f * deltaTime;
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, -14.0f));
		model = glm::rotate(model, glm::radians(castleRotation), glm::vec3(0.0f, 1.0f, 0.0f));
		modelaux = model;

		model = modelaux;
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, 3.0f));
		model = glm::scale(model, glm::vec3(0.5f, 0.5f, 0.5f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[0]->RenderMesh();

		model = modelaux;
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, -3.0f));
		model = glm::scale(model, glm::vec3(0.5f, 0.5f, 0.5f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[0]->RenderMesh();

		model = modelaux;
		model = glm::translate(model, glm::vec3(3.0f, 0.0f, 0.0f));
		model = glm::scale(model, glm::vec3(0.5f, 0.5f, 0.5f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[0]->RenderMesh();

		model = modelaux;
		model = glm::translate(model, glm::vec3(-3.0f, 0.0f, 0.0f));
		model = glm::scale(model, glm::vec3(0.5f, 0.5f, 0.5f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[0]->RenderMesh();

		model = modelaux;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		hallwayTexture.UseTexture();
		meshList[1]->RenderMesh();

		model = modelaux;
		model = glm::rotate(model, glm::radians(90.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[1]->RenderMesh();

		model = modelaux;
		model = glm::rotate(model, glm::radians(180.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[1]->RenderMesh();

		model = modelaux;
		model = glm::rotate(model, glm::radians(270.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		meshList[1]->RenderMesh();

		model = glm::mat4(1.0);
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		tree.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.13f, 4.65685f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cow.RenderModel();

		model = modelaux;
		model = glm::translate(model, glm::vec3(-0.06f, 0.02f, -0.13f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cowArm.RenderModel();

		model = modelaux;
		model = glm::translate(model, glm::vec3(0.06f, 0.02f, -0.13f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cowArm.RenderModel();

		model = modelaux;
		model = glm::translate(model, glm::vec3(0.06f, 0.02f, 0.11f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cowArm.RenderModel();

		model = modelaux;
		model = glm::translate(model, glm::vec3(-0.06f, 0.02f, 0.11f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cowArm.RenderModel();

		model = modelaux;
		model = glm::translate(model, glm::vec3(0.0f, 0.13f, -0.13f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		cowHead.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(-5.65685f, 0.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		house02.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, 4.65685f));
		model = glm::rotate(model, glm::radians(135.0f), glm::vec3(0.0f, -1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		house03.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, -4.65685f));
		model = glm::rotate(model, glm::radians(135.0f), glm::vec3(0.0f, -1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		house03.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(5.65685f, 0.0f, 0.0f));
		model = glm::rotate(model, glm::radians(135.0f), glm::vec3(0.0f, -1.0f, 0.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		house01.RenderModel();

		house1Rotation += 0.5f * deltaTime;
		model = modelaux;
		model = glm::translate(model, glm::vec3(0.0f, 1.47f, 0.0f));
		model = glm::rotate(model, glm::radians(house1Rotation), glm::vec3(1.0f, 0.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		house01Spin.RenderModel();


		fliper1 = animateFliper(fliper1Key, fliper1, deltaTime);
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(-5, 0.53f, 8.0f));
		model = glm::rotate(model, glm::radians(fliper1 - 35.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliper.RenderModel();

		fliper2 = animateFliper(fliper2Key, fliper2, deltaTime);
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(5, 0.53f, 8.0f));
		model = glm::rotate(model, glm::radians(fliper2 + 145.0f), glm::vec3(0.0f, -1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliper.RenderModel();

		fliper3 = animateFliper(fliper3Key, fliper3, deltaTime);
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(-4, 0.0f, -8.0f));
		model = glm::rotate(model, glm::radians(fliper3 - 35.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliperGateWood.RenderModel();
		Material_brillante.UseMaterial(uniformSpecularIntensity, uniformShininess);
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliperGateMetal.RenderModel();

		fliper4 = animateFliper(fliper4Key, fliper4, deltaTime);
		Material_opaco.UseMaterial(uniformSpecularIntensity, uniformShininess);
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(4, 0.0f, -8.0f));
		model = glm::rotate(model, glm::radians(fliper4 + 145.0f), glm::vec3(0.0f, -1.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliperGateWood.RenderModel();
		Material_brillante.UseMaterial(uniformSpecularIntensity, uniformShininess);
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		fliperGateMetal.RenderModel();

		model = animation.getTransformMatrix(currentFrame);
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		marble.RenderModel();

		model = animation2.getTransformMatrix(currentFrame);
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		marble.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(10.5f, 0.5f, 12.2f));
		model = glm::scale(model, glm::vec3(0.65f, 0.65f, 0.65f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		lever.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(10.5f, 0.5f, 12.2f));
		model = glm::scale(model, glm::vec3(0.65f, 0.65f, 0.65f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		screw.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(9.5f, 0.85f, -3.0f));
		model = glm::rotate(model, glm::radians(180.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		model = glm::scale(model, glm::vec3(0.4f, 0.4f, 0.4f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 0.7f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -1.5f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 1.25f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -0.45f), glm::vec3(0.0f, 0.0f, 1.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vamp.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(-9.5f, 0.85f, -3.0f));
		model = glm::scale(model, glm::vec3(0.4f, 0.4f, 0.4f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 0.7f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -1.5f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 1.25f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -0.45f), glm::vec3(0.0f, 0.0f, 1.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vamp.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(9.5f, 0.85f, 4.0f));
		model = glm::rotate(model, glm::radians(180.0f), glm::vec3(0.0f, 1.0f, 0.0f));
		model = glm::scale(model, glm::vec3(0.4f, 0.4f, 0.4f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 0.7f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -1.5f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 1.25f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -0.45f), glm::vec3(0.0f, 0.0f, 1.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vamp.RenderModel();

		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(-9.5f, 0.85f, 4.0f));
		model = glm::scale(model, glm::vec3(0.4f, 0.4f, 0.4f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 0.7f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -1.5f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * 1.25f), glm::vec3(0.0f, 0.0f, 1.0f));
		modelaux = model;
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vampArm.RenderModel();
		model = modelaux;
		model = glm::translate(model, glm::vec3(1.9f, 0.0f, 0.1f));
		model = glm::rotate(model, glm::radians(vamp1 * -0.45f), glm::vec3(0.0f, 0.0f, 1.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		vamp.RenderModel();

		
		if (sentido)
		{
			if(vamp1 <= 0)
				sentido = false;
			else
				vamp1 -= deltaTime;
		}
		else
		{
			if (vamp1 >= 100)
				sentido = true;
			else
				vamp1 += deltaTime;
		}

		



		//blending: transparencia o traslucidez
		glEnable(GL_BLEND);
		model = glm::mat4(1.0);
		model = glm::translate(model, glm::vec3(0.0f, 0.0f, 0.0f));
		glUniformMatrix4fv(uniformModel, 1, GL_FALSE, glm::value_ptr(model));
		machine.RenderModel();
		glBlendFunc(GL_SRC_ALPHA, GL_ONE_MINUS_SRC_ALPHA);
		glUseProgram(0);

		mainWindow.swapBuffers();
	}

	animation.saveAnimationToFile("MarbleAnimation.txt");
	animation2.saveAnimationToFile("Marble2Animation.txt");

	return 0;
}